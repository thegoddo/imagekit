<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Subject Architect | Retro Tool</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/editor.css" />
    <style>
      .manual-tools {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }
      .tool-btn {
        flex: 1;
        font-size: 0.7rem;
        padding: 5px;
        border: 2px solid #000;
        cursor: pointer;
      }
      .tool-btn.active {
        background: #000;
        color: #fff;
      }
      #canvas-wrapper {
        position: relative;
        cursor: crosshair;
        border: 1px dashed #000;
      }
    </style>
  </head>
  <body>
    <div class="main-wrapper">
      <div class="hero-box">
        <h1>Subject Architect</h1>
        <p class="subtitle">AI Extraction & Manual Refinement</p>
      </div>

      <div class="editor-container">
        <div class="editor-panel">
          <div class="filter-section">
            <h3>1. AI Extraction</h3>
            <background-remover
              data-theme="light"
              data-device="webgpu"
              data-label="Drop Image"
            ></background-remover>
          </div>

          <div id="custom-bg-tools" style="display: none">
            <div class="filter-section">
              <h3>2. Manual Cleanup</h3>
              <div class="manual-tools">
                <button class="tool-btn active" id="btn-brush">Brush</button>
                <button class="tool-btn" id="btn-rect">Box Erase</button>
              </div>
              <input
                type="range"
                id="brush-size"
                min="5"
                max="100"
                value="30"
                style="width: 100%; margin-top: 10px"
              />
              <label style="font-size: 0.65rem"
                >Size: <span id="size-val">30</span>px</label
              >
            </div>

            <div class="filter-section">
              <h3>3. New Background</h3>
              <input
                type="color"
                id="bg-color-picker"
                value="#ffffff"
                style="width: 100%; height: 40px; border: 2px solid #000"
              />
              <input
                type="file"
                id="bg-image-input"
                accept="image/*"
                style="margin-top: 10px; font-size: 0.7rem"
              />
            </div>

            <div class="filter-section">
              <button id="download-btn" class="save">Export Final</button>
            </div>
          </div>
        </div>

        <div class="preview-img" style="flex-direction: column">
          <div id="status-text" style="font-weight: bold; margin-bottom: 10px">
            Subject Preview
          </div>
          <div id="canvas-wrapper">
            <canvas id="final-canvas"></canvas>
          </div>
        </div>
      </div>
    </div>

    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/@ligrila/background-remover@0.3.8/dist/background-remover.es.js"
    ></script>
    <script type="module" src="/js/remove-bg.js"></script>
  </body>
</html>
