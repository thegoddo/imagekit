<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Neural Architect | Retro Tool</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/editor.css" />
  </head>
  <body>
    <div class="main-wrapper">
      <div class="hero-box">
        <h1>Resolution Architect</h1>
        <p class="subtitle">Neural Super-Resolution (Safeguarded)</p>
      </div>

      <div class="editor-container">
        <div class="editor-panel">
          <div class="filter-section">
            <h3>1. Source</h3>
            <input type="file" id="file-input" accept="image/*" hidden />
            <button
              class="choose-img"
              onclick="document.getElementById('file-input').click()"
            >
              Load Low-Res
            </button>
            <div
              id="gpu-status"
              style="font-size: 0.65rem; margin-top: 5px; color: green"
            >
              Detecting Hardware...
            </div>
          </div>

          <div class="filter-section">
            <h3>2. Execution</h3>
            <button class="save" id="upscale-btn">Neural Upscale (2x)</button>
            <button
              id="abort-btn"
              style="
                display: none;
                width: 100%;
                background: red;
                color: white;
                margin-top: 10px;
              "
            >
              Emergency Stop
            </button>
          </div>

          <div class="filter-section">
            <h3>3. Export</h3>
            <button
              id="download-btn"
              style="display: none; width: 100%; background: #ffffcc"
            >
              Download Result
            </button>
          </div>
        </div>

        <div class="preview-img" style="flex-direction: column">
          <div
            id="status-text"
            style="
              margin-bottom: 10px;
              font-weight: bold;
              text-transform: uppercase;
            "
          >
            Neural Canvas
          </div>
          <div
            style="
              max-width: 100%;
              max-height: 500px;
              overflow: auto;
              border: 1px dashed #000;
            "
          >
            <canvas id="upscale-canvas"></canvas>
          </div>
          <progress
            id="upscale-progress"
            value="0"
            max="100"
            style="width: 100%; display: none; margin-top: 10px"
          ></progress>
          <div
            id="output-meta"
            style="margin-top: 15px; font-size: 0.85rem; font-family: monospace"
          ></div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@upscalerjs/default-model@latest/dist/umd/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/upscaler@latest/dist/browser/umd/upscaler.min.js"></script>

    <script type="module" src="/js/upscale.js"></script>
  </body>
</html>
